! Title: ðŸ§¹ BroomTube
! Author: caniyo
! License: MIT License
!
! A performance-conscious uBlock Origin filter list
! to clean up YouTube by removing Shorts, Live streams,
! long VODs, ads, recommendations, overlays, and UI clutter.
!
! =========================================================


! ---------------------------------------------------------
! SHORTS â€“ GLOBAL
! ---------------------------------------------------------

youtube.com##[is-shorts]

www.youtube.com###guide [title="Shorts"]
www.youtube.com##.ytd-mini-guide-entry-renderer[title="Shorts"]

www.youtube.com##ytd-search ytd-video-renderer:has([overlay-style="SHORTS"],[href^="/shorts/"])

www.youtube.com##ytd-reel-shelf-renderer

www.youtube.com##[tab-title="Shorts"]

www.youtube.com##ytd-browse[page-subtype="subscriptions"]
ytd-grid-video-renderer:has([overlay-style="SHORTS"],[href^="/shorts/"])

www.youtube.com##ytd-browse[page-subtype="subscriptions"]
ytd-video-renderer:has([overlay-style="SHORTS"],[href^="/shorts/"])

www.youtube.com##ytd-browse[page-subtype="subscriptions"]
ytd-rich-item-renderer:has([overlay-style="SHORTS"],[href^="/shorts/"])

www.youtube.com##ytd-item-section-renderer[page-subtype]
:has(>#contents>[is-history]>#dismissible>ytd-thumbnail>#thumbnail[href^="/shorts/"])


! ---------------------------------------------------------
! LIVE STREAMS & LONG VODS
! ---------------------------------------------------------

! Hide live streams
www.youtube.com##:is(
  ytd-rich-item-renderer,
  ytd-grid-video-renderer,
  ytd-compact-video-renderer,
  ytd-item-section-renderer
):has(.badge-style-type-live-now-alternate,.yt-spec-avatar-shape--live-ring)

! Hide streamed VODs (label-based)
www.youtube.com##:is(
  ytd-rich-item-renderer,
  ytd-grid-video-renderer,
  ytd-compact-video-renderer,
  ytd-item-section-renderer,
  ytd-video-renderer
):has([aria-label~="Streamed"])

! Hide very long videos (>= 2 hours)
www.youtube.com##:is(
  ytd-rich-item-renderer,
  ytd-grid-video-renderer,
  ytd-video-renderer,
  ytd-compact-video-renderer
):has(
  ytd-thumbnail-overlay-time-status-renderer
  > span:has-text(/^([2-9]:|[1-9][0-9]:)/)
)


! ---------------------------------------------------------
! SEARCH CLEANUP
! ---------------------------------------------------------

youtube.com##ytd-search ytd-item-section-renderer>#contents>:
is(
  :not(ytd-video-renderer,yt-showing-results-for-renderer,[icon-name="promo-full-height:EMPTY_SEARCH"]),
  ytd-video-renderer:has([aria-label="Shorts"])
),
ytd-secondary-search-container-renderer


! ---------------------------------------------------------
! LAYOUT â€“ REMOVE EMPTY GAPS / FIX GRID
! ---------------------------------------------------------

! Move homepage & sub-feed placeholders to the end
www.youtube.com##ytd-browse[page-subtype="home"]
:is(ytd-rich-grid-row,#contents.ytd-rich-grid-row)
:style(display: contents !important)

! Fix grid alignment (left edge)
www.youtube.com##ytd-rich-item-renderer[rendered-from-rich-grid][is-in-first-column]
:style(margin-left: calc(var(--ytd-rich-grid-item-margin)/2) !important)

www.youtube.com##ytd-rich-grid-renderer>#contents
:style(margin-left: calc(var(--ytd-rich-grid-gutter-margin)) !important)

www.youtube.com###content.ytd-rich-section-renderer
:style(
  margin-left: calc(var(--ytd-rich-grid-item-margin)/2) !important;
  margin-right: calc(var(--ytd-rich-grid-item-margin)*2.5) !important;
)


! ---------------------------------------------------------
! GRID â€“ FORCE 5 VIDEOS PER ROW
! ---------------------------------------------------------

! Enforce 5-column layout (robust)
www.youtube.com##ytd-rich-grid-renderer
:style(--ytd-rich-grid-items-per-row: 5 !important;)

www.youtube.com##ytd-rich-item-renderer
:style(width: calc(100% / 5) !important)


! ---------------------------------------------------------
! PLAYER OVERLAYS & FULLSCREEN BEHAVIOR
! ---------------------------------------------------------

youtube.com##.ytp-paid-content-overlay
youtube.com##.ytmPaidContentOverlayHost

youtube.com##.ytp-pause-overlay
youtube.com##.show-video-thumbnail-button

youtube.com##.html5-video-player.ended-mode .ytp-fullscreen-grid

! Remove fullscreen suggestion grid & wheel behavior
youtube.com##.html5-video-player.ytp-fullscreen
.ytp-fullscreen-grid,
youtube.com##.html5-video-player.ytp-fullscreen
.ytp-gradient-bottom

youtube.com##div.html5-video-player
:style(--ytp-grid-scroll-percentage: 0 !important)

www.youtube.com##+js(aeld, wheel, , elements, .html5-video-player )


! ---------------------------------------------------------
! MISC
! ---------------------------------------------------------

youtube.com##ytd-rich-item-renderer:has(.yt-badge-shape--membership)

! Remove sidebar entirely
www.youtube.com##ytd-watch-flexy #secondary
